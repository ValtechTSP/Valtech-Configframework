See http://blog.valtech.dk/2011/05/targeting-multiple-environments-and-machines-part-22/